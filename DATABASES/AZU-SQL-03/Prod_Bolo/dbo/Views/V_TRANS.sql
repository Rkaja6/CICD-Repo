
CREATE VIEW [V_TRANS] AS
SELECT 
	T.*,
	I.ACCT AS AP_ACCT,
	I.ADVICE_REMARKS, 
	I.AMT AS AP_AMT,
	I.DUE_DATE,
	I.IMAGE_REF,
	I.INVOICE_DATE,
	I.INVOICE_NO,
	I.PAID_IN_FULL_PERIOD,
	I.PAY_DISP,
	I.RECD_DATE,
	I.INT_AMT AS AP_INT_AMT,
	V.NAME1 AS Vendor,
	V.BASE_ID AS Vendor_ID,
	P.NAME1 AS Party, 
	J.DESCRIPTION as JE_DESCRIPTION, 
	J.CONTROL_TOTAL,
	J.REVERSAL_VOUCHER, 
	AFE.PROJECT AS AFE_Number,
	AFE.DESCRIPTION AS AFE_Description,
	AFE.STATUS AS AFE_Status
FROM dbo.[TRANS] T
LEFT JOIN dbo.AP_INV I
	ON T.SOURCE_TABLE = 'AP.INV'
	AND T.VOUCHER = I.VOUCHER
LEFT JOIN dbo.JE J
	ON T.SOURCE_TABLE = 'JE'
	AND T.VOUCHER = J.u2_id
LEFT JOIN dbo.NAME V
	ON I.VENDOR = V.u2_id
LEFT JOIN dbo.NAME P
	ON T.NAME = P.u2_id
LEFT JOIN dbo.PROJ AFE
	ON T.PROJECT = AFE.u2_id